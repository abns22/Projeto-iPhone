{% extends "base_modern.html" %}

{% block title %}Gerenciar Usuários{% endblock %}

{% block page_indicator %}Admin{% endblock %}

{% block header_nav %}
    <a href="{{ url_for('admin_dashboard') }}" class="header-nav-item">
        <i class="fas fa-gauge"></i>
        <span>Admin</span>
    </a>
    <a href="{{ url_for('gerenciar_modelos_admin') }}" class="header-nav-item">
        <i class="fas fa-cubes"></i>
        <span>Modelos</span>
    </a>
    <a href="{{ url_for('gerenciar_usuarios_admin') }}" class="header-nav-item active">
        <i class="fas fa-users"></i>
        <span>Usuários</span>
    </a>
    <a href="{{ url_for('gerar_link_convite') }}" class="header-nav-item">
        <i class="fas fa-link"></i>
        <span>Convites</span>
    </a>
    <a href="{{ url_for('relatorios_dashboard') }}" class="header-nav-item">
        <i class="fas fa-chart-bar"></i>
        <span>Relatórios</span>
    </a>
{% endblock %}

{% block mobile_nav %}
    <a href="{{ url_for('admin_dashboard') }}" class="header-nav-item">
        <i class="fas fa-gauge"></i>
        <span>Painel de Administração</span>
    </a>
    <a href="{{ url_for('gerenciar_modelos_admin') }}" class="header-nav-item">
        <i class="fas fa-cubes"></i>
        <span>Gerenciar Modelos</span>
    </a>
    <a href="{{ url_for('gerenciar_usuarios_admin') }}" class="header-nav-item active">
        <i class="fas fa-users"></i>
        <span>Gerenciar Usuários</span>
    </a>
    <a href="{{ url_for('gerar_link_convite') }}" class="header-nav-item">
        <i class="fas fa-link"></i>
        <span>Gerar Link de Convite</span>
    </a>
    <a href="{{ url_for('relatorios_dashboard') }}" class="header-nav-item">
        <i class="fas fa-chart-bar"></i>
        <span>Relatórios</span>
    </a>
{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="d-flex justify-content-between align-items-center" style="margin-bottom: 20px;">
        <h1 style="margin: 0;">Gerenciar Usuários</h1>
        <a href="{{ url_for('adicionar_usuario_admin') }}" class="btn btn-adicionar"><i class="fas fa-plus"></i> Adicionar Novo Usuário</a>
    </div>

    <div class="admin-table-wrapper">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Nome Completo</th>
                    <th>E-mail (Login)</th>
                    <th>É Admin?</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for usuario in usuarios %}
                <tr>
                    <td>{{ usuario.nome_completo }}</td>
                    <td>{{ usuario.email }}</td>
                    <td>{{ 'Sim' if usuario.is_admin else 'Não' }}</td>
                    <td class="actions-cell">
                        <form method="POST" action="{{ url_for('deletar_usuario_admin', usuario_id=usuario.id) }}" onsubmit="return confirm('Tem certeza que quer deletar o usuário {{ usuario.nome_completo }}?');">
                            <button type="submit" class="btn btn-deletar">
                                <i class="fas fa-trash-can"></i> Deletar
                            </button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4">Nenhum usuário cadastrado para esta empresa.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}